Rules:

A) root is always #complex
B) #inlined
B.1) child of #complex (and no child of list)
B.2.A) has exactly one attribute, or
B.2.B) has no attributes and text (or empty) content
C) all children of #list have same name and #list itself has no attributes
D) #complex otherwise